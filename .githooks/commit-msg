#!/bin/bash

commit_types="(build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test|wip)"
convetional_commit_regex="^${commit_types}(\([a-z \-]+\))?!?: .+$"

commit_message=$(cat "$1")

if [[ "$commit_message" =~ $convetional_commit_regex ]]; then
  echo -e "\e[1;32mâœ”ï¸ Â¡Perfecto! El mensaje de commit cumple con el estÃ¡ndar de Conventional Commits.\e[0m"
  exit 0
fi

# En caso de error
echo -e "\n\e[1;31mâŒ El mensaje de commit NO cumple con el estÃ¡ndar de Conventional Commits\e[0m"
echo -e "\n\e[1;33mğŸ“ Ejemplo vÃ¡lido:\e[0m"
echo -e "  \e[1;36mfeat(login): agregar el botÃ³n 'recordarme'\e[0m"
echo -e "\n\e[1;34mğŸ“š MÃ¡s informaciÃ³n:\e[0m https://www.conventionalcommits.org/es/v1.0.0/#summary"
echo -e "\n\e[1;35mğŸ¯ Tipos de mensaje vÃ¡lidos:\e[0m ${commit_types}"
echo -e "\n\e[1;33mğŸ“Œ Formatos correctos:\e[0m"
echo -e "  \e[1;36m<tipo>: <descripciÃ³n>\e[0m  (mÃ¡x. 50 caracteres)"
echo -e "    \e[2mEjemplo:\e[0m \e[3mfix: error al validar usuario\e[0m"
echo -e "  \e[1;36m<tipo>(<Ã¡rea>): <descripciÃ³n>\e[0m  (Ã¡rea es opcional)"
echo -e "    \e[2mEjemplo:\e[0m \e[3mfix(usuario): el correo electrÃ³nico estÃ¡ vacÃ­o en el perfil\e[0m"
echo -e "\n\e[1;31m***********************************************************************\e[0m"

exit 1
